(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93a83094"],{"00c0":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("8c71"),r=i("0326"),s=i("7c4b");class a extends s["a"]{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}get blendMode(){return this._blendMode}set blendMode(t){this._blendMode=t,this.requestRender()}get clips(){return this._clips}set clips(t){this._clips=t,this.children.forEach(e=>e.clips=t)}get computedEffects(){var t,e;return null!=(t=null==(e=this._effectView)?void 0:e.effects)?t:null}get effect(){var t,e;return null!=(t=null==(e=this._effectView)?void 0:e.effect)?t:""}set effect(t){(this._effectView||t)&&(this._effectView||(this._effectView=new r["a"]),this._effectView.effect=t,this.requestRender())}updateTransitionProperties(t,e){super.updateTransitionProperties(t,e),this._effectView&&(this._effectView.transitionStep(t,e),this._effectView.transitioning&&this.requestRender())}doRender(t){const e=this.createRenderParams(t);this.renderChildren(e)}addChild(t){return this.addChildAt(t,this.children.length)}addChildAt(t,e=this.children.length){if(!t)return t;if(this.contains(t))return t;this._needsSort=!0;const i=t.parent;return i&&i!==this&&i.removeChild(t),e>=this.children.length?this.children.push(t):this.children.splice(e,0,t),this._childrenSet.add(t),t.parent=this,t.stage=this.stage,this!==this.stage&&(t.clips=this.clips),this.requestRender(),t}contains(t){return this._childrenSet.has(t)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const t of this.children)this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null;this.children.length=0}removeChild(t){return this.contains(t)?this.removeChildAt(this.children.indexOf(t)):t}removeChildAt(t){if(t<0||t>=this.children.length)return null;this._needsSort=!0;const e=this.children.splice(t,1)[0];return this._childrenSet.delete(e),this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null,e}sortChildren(t){this._needsSort&&(this.children.sort(t),this._needsSort=!1)}_createTransforms(){return{dvs:Object(n["b"])()}}onAttach(){super.onAttach();const t=this.stage;for(const e of this.children)e.stage=t}onDetach(){super.onDetach();for(const t of this.children)t.stage=null}renderChildren(t){for(const e of this.children)e.beforeRender(t);for(const e of this.children)e.processRender(t);for(const e of this.children)e.afterRender(t)}createRenderParams(t){return{...t,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}}},"0326":function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i("a4ee"),r=i("fc29"),s=i("c120"),a=i("7ffa"),o=i("e92d"),c=i("59b2"),u=(i("cea0"),i("d386")),l=i("b90c"),h=i("22f1");const d=-1;let f=class extends r["a"]{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=Object(s["a"])("mapview-transitions-duration"),this.effects=[]}set effect(t){if(this._get("effect")!==(t=t||"")){this._set("effect",t);try{this._transitionTo(_(t))}catch(e){this._transitionTo([]),o["a"].getLogger(this.declaredClass).warn("Invalid Effect",{effect:t,error:e})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return null!==this._to}canTransitionTo(t){try{return this.scale>0&&v(this._current,_(t),this.scale)}catch{return!1}}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e)}end(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&v(this._current,t,this.scale)?(this._final=t,this._to=Object(a["a"])(t),g(this._current,this._to,this.scale),this._from=Object(a["a"])(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set("effects",this._current[0]?Object(a["a"])(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let i=0;i<this._current.length;i++){const t=this._current[i],n=this._from[i],r=this._to[i];t.scale=m(n.scale,r.scale,e);for(let i=0;i<t.effects.length;i++){const s=t.effects[i],a=n.effects[i],o=r.effects[i];s.interpolate(a,o,e)}}1===e&&(this._current=this._final,this._set("effects",this._current[0]?Object(a["a"])(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set("scale",t),0===this._current.length)return;const e=this._current,i=this._current.length-1;let n,r,s=1;if(1===e.length||t>=e[0].scale)r=n=e[0].effects;else if(t<=e[i].scale)r=n=e[i].effects;else for(let a=0;a<i;a++){const i=e[a],o=e[a+1];if(i.scale>=t&&o.scale<=t){s=(t-i.scale)/(o.scale-i.scale),n=i.effects,r=o.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(n[a],r[a],s)}};Object(n["a"])([Object(c["b"])()],f.prototype,"_to",void 0),Object(n["a"])([Object(c["b"])()],f.prototype,"duration",void 0),Object(n["a"])([Object(c["b"])({value:""})],f.prototype,"effect",null),Object(n["a"])([Object(c["b"])({readOnly:!0})],f.prototype,"effects",void 0),Object(n["a"])([Object(c["b"])({readOnly:!0})],f.prototype,"hasEffects",null),Object(n["a"])([Object(c["b"])({value:0})],f.prototype,"scale",null),Object(n["a"])([Object(c["b"])({readOnly:!0})],f.prototype,"transitioning",null),f=Object(n["a"])([Object(u["a"])("esri.layers.effects.EffectView")],f);const p=f;function _(t){const e=Object(l["a"])(t)||[];return T(e)?[{scale:d,effects:e}]:e}function v(t,e,i){var n,r,s,a;return null==(n=t[0])||!n.effects||null==(r=e[0])||!r.effects||!(((null==(s=t[0])?void 0:s.scale)===d||(null==(a=e[0])?void 0:a.scale)===d)&&(t.length>1||e.length>1)&&i<=0)&&Object(h["a"])(t[0].effects,e[0].effects)}function g(t,e,i){var n,r;const s=t.length>e.length?t:e,a=t.length>e.length?e:t,o=a[a.length-1],c=null!=(n=null==o?void 0:o.scale)?n:i,u=null!=(r=null==o?void 0:o.effects)?r:[];for(let l=a.length;l<s.length;l++)a.push({scale:c,effects:[...u]});for(let l=0;l<s.length;l++)a[l].scale=a[l].scale===d?i:a[l].scale,s[l].scale=s[l].scale===d?i:s[l].scale,Object(h["c"])(a[l].effects,s[l].effects)}function m(t,e,i){return t+(e-t)*i}function T(t){const e=t[0];return!!e&&"type"in e}},"18c6":function(t,e,i){"use strict";i.d(e,"a",(function(){return x})),i.d(e,"b",(function(){return F})),i.d(e,"c",(function(){return N})),i.d(e,"d",(function(){return U})),i.d(e,"e",(function(){return I})),i.d(e,"f",(function(){return C})),i.d(e,"g",(function(){return O})),i.d(e,"h",(function(){return A}));var n=i("ce50"),r=i("c84e"),s=i("9b77");function a(t,e){const i=r["e"].SIZE_FIELD_STOPS|r["e"].SIZE_MINMAX_VALUE|r["e"].SIZE_SCALE_STOPS|r["e"].SIZE_UNIT_VALUE,n=(t&(r["f"].FIELD_TARGETS_OUTLINE|r["f"].MINMAX_TARGETS_OUTLINE|r["f"].SCALE_TARGETS_OUTLINE|r["f"].UNIT_TARGETS_OUTLINE))>>>4;return e.isOutline||e.isOutlinedFill?i&n:i&~n}const o=0,c=8,u=7,l=8,h=11,d=11,f=12,p=13,_=14,v=15,g=15,m=16,T=17,S=18,E=19,b=20,y=21,M=22;function O(t,e){switch(t){case r["d"].FILL:return x.from(e);case r["d"].LINE:return N.from(e);case r["d"].MARKER:return U.from(e);case r["d"].TEXT:return C.from(e);case r["d"].LABEL:return F.from(e);default:throw new Error("Unable to createMaterialKey for unknown geometryType "+t)}}function A(t){switch(I.load(t).geometryType){case r["d"].MARKER:return new U(t);case r["d"].FILL:return new x(t);case r["d"].LINE:return new N(t);case r["d"].TEXT:return new C(t);case r["d"].LABEL:return new F(t)}}class I{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(l,h)}set geometryType(t){this.setBits(t,l,h)}get mapAligned(){return!!this.bit(b)}set mapAligned(t){this.setBit(b,t)}get sdf(){return!!this.bit(d)}set sdf(t){this.setBit(d,t)}get pattern(){return!!this.bit(f)}set pattern(t){this.setBit(f,t)}get textureBinding(){return this.bits(o,c)}set textureBinding(t){this.setBits(t,o,c)}get geometryTypeString(){switch(this.geometryType){case r["d"].FILL:return"fill";case r["d"].MARKER:return"marker";case r["d"].LINE:return"line";case r["d"].TEXT:return"text";case r["d"].LABEL:return"label";default:throw new n["a"]("Unable to handle unknown geometryType: "+this.geometryType)}}setBit(t,e){const i=1<<t;e?this._data|=i:this._data&=~i}bit(t){return(this._data&1<<t)>>t}setBits(t,e,i){for(let n=e,r=0;n<i;n++,r++)this.setBit(n,0!=(t&1<<r))}bits(t,e){let i=0;for(let n=t,r=0;n<e;n++,r++)i|=this.bit(n)<<r;return i}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(u&this.textureBinding)}}I.shared=new I(0);const L=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(m)}set vvSizeMinMaxValue(t){this.setBit(m,t)}get vvSizeScaleStops(){return 0!==this.bit(T)}set vvSizeScaleStops(t){this.setBit(T,t)}get vvSizeFieldStops(){return 0!==this.bit(S)}set vvSizeFieldStops(t){this.setBit(S,t)}get vvSizeUnitValue(){return 0!==this.bit(E)}set vvSizeUnitValue(t){this.setBit(E,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,e){super.setVV(t,e);const i=a(t,e)&t;this.vvSizeMinMaxValue=!!(i&r["e"].SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(i&r["e"].SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(i&r["e"].SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(i&r["e"].SIZE_SCALE_STOPS)}},R=t=>class extends t{get vvRotation(){return 0!==this.bit(v)}set vvRotation(t){this.setBit(v,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,e){super.setVV(t,e),this.vvRotation=!e.isOutline&&!!(t&r["e"].ROTATION)}},w=t=>class extends t{get vvColor(){return 0!==this.bit(p)}set vvColor(t){this.setBit(p,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,e){super.setVV(t,e),this.vvColor=!e.isOutline&&!!(t&r["e"].COLOR)}},V=t=>class extends t{get vvOpacity(){return 0!==this.bit(_)}set vvOpacity(t){this.setBit(_,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,e){super.setVV(t,e),this.vvOpacity=!e.isOutline&&!!(t&r["e"].OPACITY)}};class x extends(w(V(L(I)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=r["d"].FILL,e.dotDensity="dot-density"===t.stride.fill,e.simple="simple"===t.stride.fill,e.outlinedFill=t.isOutlinedFill,e.dotDensity||e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(g)}set dotDensity(t){this.setBit(g,t)}get simple(){return!!this.bit(M)}set simple(t){this.setBit(M,t)}get outlinedFill(){return!!this.bit(y)}set outlinedFill(t){this.setBit(y,t)}}x.shared=new x(0);class U extends(w(V(R(L(I))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=r["d"].MARKER,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}U.shared=new U(0);class N extends(w(V(L(I)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=r["d"].LINE,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}N.shared=new N(0);class C extends(w(V(R(L(I))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=r["d"].TEXT,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}C.shared=new C(0);class F extends(L(I)){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=r["d"].LABEL,e.setVV(t.vvFlags,t),e.mapAligned=Object(s["a"])(t.placement),e.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}F.shared=new F(0)},1956:function(t,e,i){"use strict";i.d(e,"a",(function(){return h})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return l}));var n=i("ce50"),r=i("c120"),s=i("e92d");const a=s["a"].getLogger("esri/views/webgl");function o(t,e){switch(e){case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const c=!!Object(r["a"])("enable-feature:webgl-debug");function u(){return c}function l(){return c}function h(t){if(u()){const e=t.getError();if(e){const i=o(t,e),r=(new Error).stack;a.error(new n["a"]("webgl-error","WebGL error occured",{message:i,stack:r}))}}}},"7c4b":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("ce6d"),r=i("c120"),s=i("b2b2"),a=i("f4cc");const o=1/Object(r["a"])("mapview-transitions-duration");class c extends n["a"]{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(t){this._clips=t,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(t){this._opacity!==t&&(this._opacity=Math.min(1,Math.max(t,0)),this.requestRender())}get stage(){return this._stage}set stage(t){if(this._stage===t)return;const e=this._stage;this._stage=t,t?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):e.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return Object(s["k"])(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=Object(a["g"])(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=Object(a["g"])(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(t){this.updateTransitionProperties(t.deltaTime,t.state.scale)}afterRender(t){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var t;null==(t=this.parent)||t.removeChild(this)}setTransform(t){}processRender(t){this.stage&&this.computedVisible&&this.doRender(t)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.onDetach(),this.emit("detach")}updateTransitionProperties(t,e){if(this.fadeTransitionEnabled){const e=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===e)this.computedVisible=this.visible;else{const n=t*o;this.computedOpacity=i>e?Math.max(e,i-n):Math.min(e,i+n),this.computedVisible=this.computedOpacity>0;const r=e===this.computedOpacity;this.inFadeTransition=!r,r||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(t){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},"8c81":function(t,e,i){"use strict";i.d(e,"a",(function(){return b})),i.d(e,"b",(function(){return y})),i.d(e,"c",(function(){return l})),i.d(e,"d",(function(){return D})),i.d(e,"e",(function(){return G})),i.d(e,"f",(function(){return z})),i.d(e,"g",(function(){return P})),i.d(e,"h",(function(){return B})),i.d(e,"i",(function(){return j})),i.d(e,"j",(function(){return X})),i.d(e,"k",(function(){return N})),i.d(e,"l",(function(){return a})),i.d(e,"m",(function(){return I})),i.d(e,"n",(function(){return A})),i.d(e,"o",(function(){return c})),i.d(e,"p",(function(){return O})),i.d(e,"q",(function(){return R})),i.d(e,"r",(function(){return o})),i.d(e,"s",(function(){return M})),i.d(e,"t",(function(){return F})),i.d(e,"u",(function(){return n})),i.d(e,"v",(function(){return C})),i.d(e,"w",(function(){return r})),i.d(e,"x",(function(){return U})),i.d(e,"y",(function(){return p})),i.d(e,"z",(function(){return _})),i.d(e,"A",(function(){return v})),i.d(e,"B",(function(){return g})),i.d(e,"C",(function(){return f})),i.d(e,"D",(function(){return d})),i.d(e,"E",(function(){return m})),i.d(e,"F",(function(){return T})),i.d(e,"G",(function(){return S})),i.d(e,"H",(function(){return E})),i.d(e,"I",(function(){return h})),i.d(e,"J",(function(){return u})),i.d(e,"K",(function(){return L})),i.d(e,"L",(function(){return s})),i.d(e,"M",(function(){return x})),i.d(e,"N",(function(){return V})),i.d(e,"O",(function(){return w}));const n=1e-30,r=4294967295,s=512,a=8,o=29,c=24,u=8,l={metrics:{width:15,height:17,left:0,top:-7,advance:14}},h=0,d=0,f=0,p=1,_=2,v=3,g=4,m=5,T=6,S=5,E=6,b=1,y=2,M=2,O=1,A=2,I=4,L=1.05,R=6,w=5,V=6,x=1.15,U=2,N=8,C=500,F=10,D=2,P=0,z=1,B=4,j=8,G=4,X=1},"9b77":function(t,e,i){"use strict";function n(t){switch(t){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}i.d(e,"a",(function(){return n}))},a1ff:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("38a4"),r=i("b2b2"),s=i("1956"),a=i("d17d"),o=i("c514");const c=4;class u{constructor(t,e,i=null){this._context=t,this.type="texture",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(a["c"].Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},34067===this._descriptor.target?this.setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(a["c"].Texture,this))}release(){this.dispose()}resize(t,e){const i=this._descriptor;i.width===t&&i.height===e||(i.width=t,i.height=e,34067===this._descriptor.target?this.setDataCubeMap(null):this.setData(null))}setDataCubeMap(t=null){for(let e=34069;e<=34074;e++)this.setData(t,e)}setData(t,e=3553){if(!this._context||!this._context.gl)return;const i=this._context.gl;this._glName||(this._glName=i.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||c,this._descriptor.height=this._descriptor.height||c);const n=this._context.bindTexture(this,u.TEXTURE_UNIT_FOR_UPDATES),a=this._descriptor;u._validateTexture(this._context,a),i.pixelStorei(i.UNPACK_ALIGNMENT,a.unpackAlignment),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,a.flipped?1:0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.preMultiplyAlpha?1:0);const o=a.pixelFormat;let h=a.internalFormat?a.internalFormat:this._deriveInternalFormat(o,a.dataType);if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let n=t.width,r=t.height;t instanceof HTMLVideoElement&&(n=t.videoWidth,r=t.videoHeight),a.width&&a.height,i.texImage2D(e,0,h,o,a.dataType,t),Object(s["a"])(i),a.hasMipmap&&this.generateMipmap(),void 0===a.width&&(a.width=n),void 0===a.height&&(a.height=r)}else{null!=a.width&&null!=a.height||console.error("Width and height must be specified!"),i.DEPTH24_STENCIL8&&h===i.DEPTH_STENCIL&&(h=i.DEPTH24_STENCIL8);let n=a.width,c=a.height;if(l(t)){const r=Math.round(Math.log(Math.max(n,c))/Math.LN2)+1;a.hasMipmap=a.hasMipmap&&r===t.levels.length;for(let s=0;;++s){const r=t.levels[Math.min(s,t.levels.length-1)];if(i.compressedTexImage2D(e,s,h,n,c,0,r),1===n&&1===c||!a.hasMipmap)break;n=Math.max(1,n>>1),c=Math.max(1,c>>1)}}else if(Object(r["l"])(t))i.texImage2D(e,0,h,n,c,0,o,a.dataType,t),Object(s["a"])(i),a.hasMipmap&&this.generateMipmap();else for(let t=0;i.texImage2D(e,t,h,n,c,0,o,a.dataType,null),Object(s["a"])(i),(1!==n||1!==c)&&a.hasMipmap;++t)n=Math.max(1,n>>1),c=Math.max(1,c>>1)}u._applySamplingMode(i,this._descriptor),u._applyWrapMode(i,this._descriptor),u._applyAnisotropicFilteringParameters(this._context,this._descriptor),Object(s["a"])(i),this._context.bindTexture(n,u.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,e,i,n,r,s,a=3553){s||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const o=this._context.gl,c=this._descriptor,l=this._context.bindTexture(this,u.TEXTURE_UNIT_FOR_UPDATES);(e<0||i<0||n>c.width||r>c.height||e+n>c.width||i+r>c.height)&&console.error("An attempt to update out of bounds of the texture!"),o.pixelStorei(o.UNPACK_ALIGNMENT,c.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,c.flipped?1:0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.preMultiplyAlpha?1:0),s instanceof ImageData||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement?o.texSubImage2D(a,t,e,i,c.pixelFormat,c.dataType,s):o.texSubImage2D(a,t,e,i,n,r,c.pixelFormat,c.dataType,s),this._context.bindTexture(l,u.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,u._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.bindTexture(this,u.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(t.target),this._context.bindTexture(e,u.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,u._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(u._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(u._applyWrapMode(t,e),this._wrapModeDirty=!1)}_deriveInternalFormat(t,e){if("webgl"===this._context.webglVersion)return t;if(5126===e)switch(t){case 6408:return 34836;case 6407:return 34837;default:throw new Error("Unable to derive format")}return t}static _validateTexture(t,e){(e.width<0||e.height<0)&&console.error("Negative dimension parameters are not allowed!");const i=Object(n["k"])(e.width)&&Object(n["k"])(e.height);Object(o["a"])(t.gl)||i||("number"==typeof e.wrapMode?33071!==e.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===e.wrapMode.s&&33071===e.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),e.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(t,e){let i=e.samplingMode,n=e.samplingMode;9985===i||9987===i?(i=9729,e.hasMipmap||(n=9729)):9984!==i&&9986!==i||(i=9728,e.hasMipmap||(n=9728)),t.texParameteri(e.target,t.TEXTURE_MAG_FILTER,i),t.texParameteri(e.target,t.TEXTURE_MIN_FILTER,n)}static _applyWrapMode(t,e){"number"==typeof e.wrapMode?(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){var i;const n=t.capabilities.textureFilterAnisotropic;n&&t.gl.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY,null!=(i=e.maxAnisotropy)?i:1)}}function l(t){return Object(r["l"])(t)&&"type"in t&&"compressed"===t.type}u.TEXTURE_UNIT_FOR_UPDATES=0},a9a2:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return c}));var n=i("d114");function r(t,e){return Array.isArray(e)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):(t[0]=e.r,t[1]=e.g,t[2]=e.b,t[3]=e.a),t}function s(t,e=0,i=!1){const n=t[e+3];return t[e+0]*=n,t[e+1]*=n,t[e+2]*=n,i||(t[e+3]*=255),t}function a(t){return s(r([],t))}function o(t){if(!t)return 0;const{r:e,g:i,b:r,a:s}=t;return Object(n["b"])(e*s,i*s,r*s,255*s)}function c(t){if(!t)return 0;const[e,i,r,s]=t;return Object(n["b"])(e*(s/255),i*(s/255),r*(s/255),s)}},c514:function(t,e,i){"use strict";function n(t){return window.WebGL2RenderingContext&&t instanceof window.WebGL2RenderingContext}i.d(e,"a",(function(){return n}))},c84e:function(t,e,i){"use strict";var n,r,s,a,o,c,u;i.d(e,"a",(function(){return u})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"d",(function(){return n})),i.d(e,"e",(function(){return o})),i.d(e,"f",(function(){return c})),function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"}(n||(n={})),function(t){t[t.SUCCEEDED=0]="SUCCEEDED",t[t.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(r||(r={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(s||(s={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(a||(a={})),function(t){t[t.NONE=0]="NONE",t[t.OPACITY=1]="OPACITY",t[t.COLOR=2]="COLOR",t[t.ROTATION=4]="ROTATION",t[t.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",t[t.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",t[t.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",t[t.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(o||(o={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(c||(c={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(u||(u={}))},c8dd:function(t,e,i){"use strict";i.d(e,"a",(function(){return j})),i.d(e,"b",(function(){return U})),i.d(e,"c",(function(){return N})),i.d(e,"d",(function(){return ct})),i.d(e,"e",(function(){return B})),i.d(e,"f",(function(){return G})),i.d(e,"g",(function(){return K})),i.d(e,"h",(function(){return $})),i.d(e,"i",(function(){return D})),i.d(e,"j",(function(){return P})),i.d(e,"k",(function(){return ot})),i.d(e,"l",(function(){return k})),i.d(e,"m",(function(){return H})),i.d(e,"n",(function(){return O})),i.d(e,"o",(function(){return tt})),i.d(e,"p",(function(){return z})),i.d(e,"q",(function(){return nt})),i.d(e,"r",(function(){return C})),i.d(e,"s",(function(){return et})),i.d(e,"t",(function(){return Q})),i.d(e,"u",(function(){return F})),i.d(e,"v",(function(){return it})),i.d(e,"w",(function(){return st})),i.d(e,"x",(function(){return J})),i.d(e,"y",(function(){return rt})),i.d(e,"z",(function(){return at})),i.d(e,"A",(function(){return x}));var n=i("ce50"),r=i("e92d"),s=(i("38a4"),i("a915"),i("a9a2"),i("c84e")),a=i("ecd7");class o{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(t,e,i,n,r,s,a,o,c){this.color=t,this.haloColor=e,this.haloSize=i,this.size=n,this.angle=r,this.offsetX=s,this.offsetY=a,this.hAnchor=o,this.vAnchor=c}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}o.pool=new a["a"](o);i("a1ff");const c=r["a"].getLogger("esri.views.2d.engine.webgl.Utils"),u="geometry",l=[{name:u,strideInBytes:36,divisor:0}],h=[{name:u,strideInBytes:32,divisor:0}],d=[{name:u,strideInBytes:20,divisor:0}],f=[{name:u,strideInBytes:12,divisor:0}],p=[{name:u,strideInBytes:40,divisor:0}],_=[{name:u,strideInBytes:36,divisor:0}],v=[{name:u,strideInBytes:36,divisor:0}];function g(t){const e={};for(const i of t)e[i.name]=i.strideInBytes;return e}const m=g(l),T=g(h),S=g(d),E=g(f),b=g(p),y=g(_),M=g(v);function O(t,{fill:e}){switch(t){case s["d"].MARKER:return m;case s["d"].FILL:return"dot-density"===e?E:"simple"===e?S:T;case s["d"].LINE:return b;case s["d"].TEXT:return y;case s["d"].LABEL:return M}}const A=[u],I=[u],L=[u],R=[u],w=[u];function V(t){switch(t){case s["d"].MARKER:return A;case s["d"].FILL:return I;case s["d"].LINE:return L;case s["d"].TEXT:return R;case s["d"].LABEL:return w}}function x(t){switch(t%4){case 0:case 2:return 4;case 1:case 3:return 1}}function U(t,e){switch(e%4){case 0:case 2:return new Uint32Array(Math.floor(t*e/4));case 1:case 3:return new Uint8Array(t*e)}}function N(t,e){switch(e%4){case 0:case 2:return new Uint32Array(t);case 1:case 3:return new Uint8Array(t)}}function C(t){return null!=t}function F(t){return"number"==typeof t}function D(t){switch(t){case"butt":return 0;case"round":return 1;case"square":return 2;default:return c.error(new n["a"]("mapview-invalid-type",`Cap type ${t} is not a valid option. Defaulting to round`)),1}}function P(t){switch(t){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return c.error(new n["a"]("mapview-invalid-type",`Join type ${t} is not a valid option. Defaulting to round`)),1}}function z(t){switch(t){case"opacity":return s["b"].OPACITY;case"color":return s["b"].COLOR;case"rotation":return s["b"].ROTATION;case"size":return s["b"].SIZE;default:return c.error("Cannot interpret unknown vv: "+t),null}}function B(t,e,i,n,r,s,a){for(const c in s){const e=s[c].stride,n=x(e),a=s[c].data,o=i[c].data,u=e*r.vertexCount/n,l=e*t/n,h=e*r.vertexFrom/n;for(let t=0;t<u;++t)o[t+l]=a[t+h]}const o=r.indexCount;for(let c=0;c<o;++c)n[c+e]=a[c+r.indexFrom]-r.vertexFrom+t}const j={[u]:35044};function G(t,e){const i=[];for(let n=0;n<5;++n){const r=V(n),s={};for(const t of r)s[t]={data:e(n,t)};i.push({data:t(n),buffers:s})}return i}function X(t){switch(t){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function H(t){switch(t){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void c.error(new n["a"]("webgl-utils","Unable to handle type "+t))}}function k(t){switch(t){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void c.error(new n["a"]("webgl-utils","Unable to handle type "+t))}}function q(t){const e={};for(const i in t){const n=t[i];let r=0;e[i]=n.map(t=>{const e={...t,normalized:t.normalized||!1,divisor:t.divisor||0,offset:r,stride:0};return r+=t.count*X(t.type),e}),e[i].forEach(t=>t.stride=r)}return e}const W=t=>{const e=new Map;for(const i in t)for(const n of t[i])e.set(n.name,n.location);return e},Y=t=>{const e={};for(const i in t){const n=t[i];e[i]=n.length?n[0].stride:0}return e},Z=new Map,K=(t,e)=>{if(!Z.has(t)){const i=q(e),n={strides:Y(i),bufferLayouts:i,attributes:W(e)};Z.set(t,n)}return Z.get(t)};function $(t){t(s["d"].FILL),t(s["d"].LINE),t(s["d"].MARKER),t(s["d"].TEXT),t(s["d"].LABEL)}const J=t=>"path"in t&&ut(t.path),Q=t=>"url"in t&&t.url||"imageData"in t&&t.imageData,tt=t=>"imageData"in t&&t.imageData&&"contentType"in t&&t.contentType?`data:${t.contentType};base64,${t.imageData}`:"url"in t?t.url:null,et=t=>"url"in t&&t.url&&t.url.includes(".gif")||"contentType"in t&&"image/gif"===t.contentType||"imageData"in t&&t.imageData.includes("data:image/gif"),it=t=>"url"in t&&t.url&&t.url.includes(".png")||"contentType"in t&&"image/png"===t.contentType||"imageData"in t&&t.imageData.includes("data:image/png"),nt=t=>t.type&&-1!==t.type.toLowerCase().indexOf("3d");function rt(t){switch(t.type){case"line":{const e=t;return"CIMSolidStroke"===e.cim.type&&!e.dashTemplate}case"fill":return"CIMSolidFill"===t.cim.type;case"esriSFS":return"esriSFSSolid"===t.style||"esriSFSNull"===t.style;case"esriSLS":return"esriSLSSolid"===t.style||"esriSLSNull"===t.style;default:return!1}}const st=t=>t.includes("data:image/svg+xml");function at(t){switch("cim"in t?t.cim.type:t.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":case"CIMVectorMarker":case"CIMPictureMarker":case"CIMCharacterMarker":return!1;default:return!0}}function ot(t){const e="maxVVSize"in t&&t.maxVVSize,i="width"in t&&t.width||"size"in t&&t.size||0;return e||i}function ct(t){const e=[];for(let i=0;i<t.length;i++)e.push(t.charCodeAt(i));return e}const ut=t=>!!t&&(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))},d114:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r}));const n=new Float32Array(1);new Uint32Array(n.buffer);function r(t){return[255&t,(65280&t)>>>8,(16711680&t)>>>16,(4278190080&t)>>>24]}function s(t,e){return 65535&t|e<<16}function a(t,e,i,n){return 255&t|(255&e)<<8|(255&i)<<16|n<<24}},d17d:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return r}));const n=33984;var r;!function(t){t[t.Texture=0]="Texture",t[t.Buffer=1]="Buffer",t[t.VAO=2]="VAO",t[t.VertexShader=3]="VertexShader",t[t.FragmentShader=4]="FragmentShader",t[t.Program=5]="Program",t[t.Framebuffer=6]="Framebuffer",t[t.Renderbuffer=7]="Renderbuffer",t[t.COUNT=8]="COUNT"}(r||(r={}));const s=33306}}]);