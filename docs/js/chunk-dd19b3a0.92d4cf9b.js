(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd19b3a0"],{1793:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var i=n("a4ee"),a=n("b2b2"),r=n("3795"),s=n("59b2"),o=(n("b50f"),n("c120"),n("cea0"),n("d386")),l=n("66af"),c=n("45e3"),u=n("d4de"),f=n("72d8"),h=n("365a"),m=n("6c7a"),d=n("e94b"),p=n("b2af");let y=class extends(Object(f["a"])(Object(m["a"])(Object(c["a"])(Object(l["a"])(h["a"]))))){constructor(){super(...arguments),this.type="imagery-tile-3d",this.isAlignedMapTile=!0}initialize(){this.layer.increaseRasterJobHandlerUsage();const e=this.updateFullExtent();this.addResolvingPromise(e);const t=Object(r["m"])(this.view,"basemapTerrain.tilingSchemeLocked").then(()=>{const e=this.view.basemapTerrain.tilingScheme,{tileInfo:t}=this.layer,n=["png","png24","png32","jpg","mixed"].indexOf(t.format)>-1&&e.compatibleWith(t);this.isAlignedMapTile=n;const i=n?t:e.toTileInfo();this._set("tileInfo",i),this.updatingHandles.add(this,"layer.renderer",()=>this.refresh()),this.updatingHandles.add(this,"layer.interpolation",()=>this.refresh()),this.updatingHandles.add(this,"layer.bandIds",()=>this.refresh()),this.updatingHandles.add(this,"layer.multidimensionalDefinition",()=>this.refresh())});this.addResolvingPromise(t)}destroy(){this.layer.decreaseRasterJobHandlerUsage(),this.view=null}get _blankTile(){const e=document.createElement("canvas"),t=e.getContext("2d"),[n,i]=this.tileInfo.size;return e.width=n,e.height=i,t.clearRect(0,0,n,i),t.getImageData(0,0,n,i)}get imageFormatIsOpaque(){return"jpg"===this.layer.tileInfo.format}get hasMixedImageFormats(){return"mixed"===this.layer.tileInfo.format}get dataLevelRange(){const e=this.tileInfo.lods,t=this.layer.tileInfo.lods,n=e[0].scale,i=t[t.length-1].scale;return this.levelRangeFromScaleRange(n,i)}async fetchTile(e,t,n,i){const r=this.tileInfo,s=this._canSymbolizeInWebGL(),o={tileInfo:r,requestRawData:s,signal:Object(a["u"])(i.signal),requestAsImageElement:this.isAlignedMapTile},l=await this.layer.fetchTile(e,t,n,o);if(l instanceof HTMLImageElement)return l;let c=l&&l.pixelBlock;if(Object(a["k"])(c))return this._blankTile;if(!s&&(c=await this.layer.applyRenderer(l),Object(a["k"])(c)))return this._blankTile;const f=new u["a"]([e,t,n],c,r.size[0],r.size[1]);return s?(f.symbolizerRenderer=this.layer.symbolizer.rendererJSON,f.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e)),f.transformGrid=l.transformGrid):f.isRendereredSource=!0,f.interpolation=this.layer.interpolation,f.bandIds=this.layer.bandIds,f}_getSymbolizerOptions(e){const t=this.tileInfo.lodAt(e).resolution;return{pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:t,y:t},bandIds:this.layer.bandIds}}ensureSymbolizerParameters(e){this._canSymbolizeInWebGL()&&JSON.stringify(e.symbolizerRenderer)!==JSON.stringify(this.layer.symbolizer.rendererJSON)&&(e.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e.lij[0])))}createFetchPopupFeaturesQueryGeometry(e,t){return Object(d["a"])(e,t,this.view)}refresh(){this.emit("data-changed")}async doRefresh(){this.suspended||this.emit("data-changed")}_canSymbolizeInWebGL(){return Object(p["a"])().supportsTextureFloat&&this.layer.symbolizer.canRenderInWebGL}};Object(i["a"])([Object(s["b"])({readOnly:!0})],y.prototype,"_blankTile",null),Object(i["a"])([Object(s["b"])({readOnly:!0})],y.prototype,"imageFormatIsOpaque",null),Object(i["a"])([Object(s["b"])({readOnly:!0})],y.prototype,"hasMixedImageFormats",null),Object(i["a"])([Object(s["b"])({readOnly:!0})],y.prototype,"dataLevelRange",null),y=Object(i["a"])([Object(o["a"])("esri.views.3d.layers.ImageryTileLayerView3D")],y);const b=y},"536f":function(e,t,n){"use strict";function i(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function a(e){let t=0,n=0;for(let i=0;i<e.length;i++){const a=e[i].size;"number"==typeof a&&(t+=a,n++)}return t/n}function r(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?a(e.stops):t}function s(e,t){if(!t)return e;const n=t.filter(e=>"size"===e.type).map(t=>{const{maxSize:n,minSize:i}=t;return(r(n,e)+r(i,e))/2});let i=0;const a=n.length;if(0===a)return e;for(let r=0;r<a;r++)i+=n[r];const s=Math.floor(i/a);return Math.max(s,e)}function o(e){const t=e&&e.renderer,n="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return n;const a="visualVariables"in t?s(n,t.visualVariables):n;if("simple"===t.type)return i(a,t.symbol);if("unique-value"===t.type){let e=a;return t.uniqueValueInfos.forEach(t=>{e=i(e,t.symbol)}),e}if("class-breaks"===t.type){let e=a;return t.classBreakInfos.forEach(t=>{e=i(e,t.symbol)}),e}return t.type,a}n.d(t,"a",(function(){return o}))},"6c7a":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("a4ee"),a=n("e92d"),r=n("f4cc"),s=n("3795"),o=n("59b2"),l=(n("b50f"),n("c120"),n("cea0"),n("d386"));const c=e=>{let t=class extends e{initialize(){this.handles.add(Object(s["b"])(this,"layer","refresh",e=>{this.doRefresh(e.dataChanged).catch(e=>{Object(r["m"])(e)||a["a"].getLogger(this.declaredClass).error(e)})}),"RefreshableLayerView")}};return Object(i["a"])([Object(o["b"])()],t.prototype,"layer",void 0),t=Object(i["a"])([Object(l["a"])("esri.layers.mixins.RefreshableLayerView")],t),t}},"72d8":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("a4ee"),a=n("8d60"),r=n("ce50"),s=n("b2b2"),o=n("59b2"),l=(n("b50f"),n("c120"),n("cea0"),n("d386")),c=n("22f4"),u=n("b4e0"),f=n("ad73");const h=e=>{let t=class extends e{constructor(){super(...arguments),this._rasterFieldPrefix="Raster.",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,t){const{layer:n}=this;if(!e)return Promise.reject(new r["a"]("imageryTileLayerView:fetchPopupFeatures","Nothing to fetch without area",{layer:n}));const{popupEnabled:i}=n,o=Object(f["a"])(n,t);if(!i||!Object(s["l"])(o))throw new r["a"]("imageryTileLayerView:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:i,popupTemplate:o});const l=[],{value:c,magdirValue:u}=await n.identify(e,{timeExtent:this.timeExtent});let h="";if(c&&c.length){var m,d;h="imagery-tile"===n.type&&n.hasStandardTime()&&null!=c[0]?c.map(e=>n.getStandardTimeValue(e)).join(", "):c.join(", ");const e={ObjectId:0},t="Raster.ServicePixelValue";e[t]=this._formatAttributeValue(h,t);const i=null==(m=n.rasterInfo)||null==(d=m.attributeTable)?void 0:d.features;if(i&&i.length>0){const t=i.filter(e=>{const t=e.attributes.value||e.attributes.Value||e.attributes.VALUE;return String(t)===h});if(t.length>0){const n=t[0];if(n)for(const t in n.attributes)if(n.attributes.hasOwnProperty(t)){const i=this._rasterFieldPrefix+t;e[i]=this._formatAttributeValue(n.attributes[t],i)}}}const r=n.rasterInfo.dataType;"vector-magdir"!==r&&"vector-uv"!==r||(e["Raster.Magnitude"]=null==u?void 0:u[0],e["Raster.Direction"]=null==u?void 0:u[1]);const s=new a["a"](this.fullExtent.clone(),null,e);s.layer=n,s.sourceLayer=s.layer,l.push(s)}return l}updateFullExtent(){const e=this.layer.tileInfo;if(!e||!e.spatialReference)return Promise.reject(new r["a"]("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));if(Object(s["k"])(this.layer.fullExtent))return Promise.reject(new r["a"]("layerview:extent-missing","The layer doesn't provide a full extent.",{layer:this.layer}));const t=Object(u["b"])(this.layer.fullExtent,this.view.spatialReference,!1),n=Object(u["h"])(this.layer.fullExtent,this.view.spatialReference,t);return null==n?Promise.reject(new r["a"]("layerview:projection-not-supported","The layer extent cannot be projected to the view's spatial reference",{layer:this.layer})):(this._set("fullExtent",n),this.datumTransformation||(this.datumTransformation=Object(u["b"])(this.layer.fullExtent,this.view.spatialReference,!0)),Promise.resolve())}_formatAttributeValue(e,t){if("string"==typeof e){const n=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(n,t),a=i&&i.format;if(a){let t,n;return e.trim().indexOf(",")>-1?(t=",",n=t+" ",this._formatDelimitedString(e,t,n,a)):e.trim().indexOf(" ")>-1?(t=n=" ",this._formatDelimitedString(e,t,n,a)):this._formatNumberFromString(e,a)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const n=t.toLowerCase();let i;return e.some(e=>!(!e.fieldName||e.fieldName.toLowerCase()!==n&&e.fieldName.toLowerCase()!==n.replace(/ /g,"_"))&&(i=e,!0)),i}_formatDelimitedString(e,t,n,i){return e&&t&&n&&i?e.trim().split(t).map(e=>this._formatNumberFromString(e,i)).join(n):e}_formatNumberFromString(e,t){if(!e||!t)return e;const n=Number(e);return isNaN(n)?e:t.format(n)}};return Object(i["a"])([Object(o["b"])()],t.prototype,"layer",void 0),Object(i["a"])([Object(o["b"])(c["a"])],t.prototype,"timeExtent",void 0),Object(i["a"])([Object(o["b"])()],t.prototype,"view",void 0),Object(i["a"])([Object(o["b"])()],t.prototype,"fullExtent",void 0),Object(i["a"])([Object(o["b"])()],t.prototype,"tileInfo",void 0),Object(i["a"])([Object(o["b"])({readOnly:!0})],t.prototype,"hasTilingEffects",null),t=Object(i["a"])([Object(l["a"])("esri.views.layers.ImageryTileLayerView")],t),t}},ad73:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));var i=n("b2b2"),a=n("c1da");async function r(e,t=e.popupTemplate){if(!Object(i["l"])(t))return[];const n=await t.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:r}=t,{objectIdField:s,typeIdField:o,globalIdField:l,relationships:c}=e;if(n.includes("*"))return["*"];const u=r?await Object(a["n"])(e):[],f=Object(a["j"])(e.fieldsIndex,[...n,...u]);return o&&f.push(o),f&&s&&e.fieldsIndex.has(s)&&-1===f.indexOf(s)&&f.push(s),f&&l&&e.fieldsIndex.has(l)&&-1===f.indexOf(l)&&f.push(l),c&&c.forEach(t=>{const{keyField:n}=t;f&&n&&e.fieldsIndex.has(n)&&-1===f.indexOf(n)&&f.push(n)}),f}function s(e,t){return e.popupTemplate?e.popupTemplate:Object(i["l"])(t)&&t.defaultPopupTemplateEnabled&&Object(i["l"])(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}},b4e0:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return N})),n.d(t,"d",(function(){return P})),n.d(t,"e",(function(){return I})),n.d(t,"f",(function(){return z})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return O})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return u})),n.d(t,"l",(function(){return L})),n.d(t,"m",(function(){return _}));n("e06a");var i=n("ce50"),a=n("b2b2"),r=n("8048"),s=n("8188"),o=n("3af1"),l=n("4ae5");const c=5e-4;function u(e,t,n){return!Object(s["b"])(e,t,n)}function f(e,t,n){const a=u(e,t,n);if(a&&!Object(s["h"])())throw new i["a"]("rasterprojectionhelper-project","projection engine is not loaded");return a}const h=function(e,t,n){const i=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,a=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4,r=(e[4*t.cols]-e[0]+e[4*t.cols+4]-e[4])/n[0]*.5,s=(e[4*t.cols+1]-e[1]+e[4*t.cols+5]-e[5])/n[1]*.5;return[0===r||isNaN(r)?0:Math.abs(i-e[2*t.rows+2])/Math.abs(r),0===s||isNaN(s)?0:Math.abs(a-e[2*t.rows+3])/Math.abs(s)]},m={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},d=32,p=4,y=p;async function b(){if(Object(s["h"])())return null;await Object(s["i"])()}function x(e,t,n){return f(e.spatialReference,t)?n?Object(s["f"])(t,e.spatialReference,e):Object(s["f"])(e.spatialReference,t,e):null}function g(e,t,n,i=null){if(e.spatialReference.equals(t))return e;f(e.spatialReference,t,i);const r=n.center,l=new o["a"]({xmin:r.x-e.x/2,xmax:r.x+e.x/2,ymin:r.y-e.y/2,ymax:r.y+e.y/2,spatialReference:e.spatialReference}),c=Object(s["m"])(l,t,i);return Object(a["k"])(c)?null:{x:c.xmax-c.xmin,y:c.ymax-c.ymin}}function j(e,t=.01){return Object(r["f"])(e)?t/Object(r["f"])(e):0}function O(e,t,n=null,i=!0){const a=e.spatialReference;if(a.equals(t))return e;f(a,t,n);const r=Object(s["m"])(e,t,n);if(i&&t.isGeographic){const[t,n]=T(a,!0),i=j(a);i&&null!=t&&null!=n&&(Math.abs(e.x-t)<i&&Math.abs(180-r.x)<c?r.x-=360:Math.abs(e.x-n)<i&&Math.abs(180+r.x)<c&&(r.x+=360))}return r}function w(e,t,n=null){const i=e[0].spatialReference;return i.equals(t)?e:(f(i,t,n),Object(s["m"])(e,t,n))}function M(e){const t=I(e[0].spatialReference);if(e.length<2||!Object(a["l"])(t))return e[0];let{xmin:n,xmax:i,ymin:r,ymax:s}=e[0];for(let a=1;a<e.length;a++){const n=e[a];i=n.xmax+t*a,r=Math.min(r,n.ymin),s=Math.max(s,n.ymax)}return new o["a"]({xmin:n,xmax:i,ymin:r,ymax:s,spatialReference:e[0].spatialReference})}function v(e,t,n=null,i=!0){if(e.spatialReference.equals(t))return e;const r=z(e),s=I(e.spatialReference,!0);return Object(a["l"])(s)&&0!==r?M(e.clone().normalize().map(e=>R(e,t,n,i))):R(e,t,n,i)}function R(e,t,n=null,i=!0){const a=e.spatialReference;if(a.equals(t))return e;f(a,t,n);const r=Object(s["m"])(e,t,n);let[o,u]=T(a,!0);if(r&&i&&a.isWebMercator&&t.isGeographic&&null!=o&&null!=u){const i=.001,s=1e3;if(Math.abs(e.xmin-o)<i&&Math.abs(u-e.xmax)>s&&Math.abs(180-r.xmax)<c){r.xmin=-180;const i=[];i.push(new l["a"](e.xmax,e.ymin,a)),i.push(new l["a"](e.xmax,(e.ymin+e.ymax)/2,a)),i.push(new l["a"](e.xmax,e.ymax,a));const s=i.map(e=>O(e,t,n)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);r.xmax=Math.max.apply(null,s)}if(Math.abs(e.xmax-u)<i&&Math.abs(o-e.xmin)>s&&Math.abs(180+r.xmin)<c){r.xmax=180;const i=[];i.push(new l["a"](e.xmin,e.ymin,a)),i.push(new l["a"](e.xmin,(e.ymin+e.ymax)/2,a)),i.push(new l["a"](e.xmin,e.ymax,a));const s=i.map(e=>O(e,t,n)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);r.xmin=Math.min.apply(null,s)}}[o,u]=T(t,!0);const h=j(t);return h&&null!=o&&null!=u&&r&&(Math.abs(r.xmin-o)<h&&(r.xmin=o),Math.abs(r.xmax-u)<h&&(r.xmax=u)),r}function I(e,t=!1){const n=t?20037508.342787:20037508.342788905;return e.isWebMercator?2*n:e.wkid&&e.isGeographic?360:2*m[e.wkid]||null}function T(e,t=!1){const n=[],i=I(e,t);return Object(a["l"])(i)&&(n.push(-i/2),n.push(i/2)),n}function S(e,t,n,i){let a=(e-t)/n;return a-Math.floor(a)!=0?a=Math.floor(a):i&&(a-=1),a}function z(e,t=!1){const n=I(e.spatialReference);if(!Object(a["l"])(n))return 0;const i=t?0:-n/2;return S(e.xmax,i,n,!0)-S(e.xmin,i,n,!1)}function P(e){const t=e.storageInfo.origin.x,n=I(e.spatialReference,!0);if(!Object(a["l"])(n))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const i=n/2,{nativePixelSize:r,storageInfo:s,extent:o}=e,{maximumPyramidLevel:l,blockWidth:c,pyramidScalingFactor:u}=s;let f=r.x;const h=[],m=Object(a["l"])(e.transform)&&"gcs-shift"===e.transform.type,d=t+(m?0:i),p=m?n-t:i-t;for(let a=0;a<=l;a++){const e=(o.xmax-t)/f/c,n=e-Math.floor(e)==0?e:Math.ceil(e),i=p/f/c,a=i-Math.floor(i)==0?i:Math.ceil(i),r=Math.floor(d/f/c),s=Math.round(d/f)%c,l=(c-Math.round(p/f)%c)%c;h.push({resolutionX:f,blockWidth:c,datsetColumnCount:n,worldColumnCountFromOrigin:a,leftMargin:s,rightPadding:l,originColumnOffset:r}),f*=u}return{originX:t,halfWorldWidth:i,pyramidsInfo:h,hasGCSSShiftTransform:m}}function N(e){const t=e.isAdaptive&&null==e.spacing,n=e.spacing||[d,d];let i=E(e),a={cols:i.size[0]+1,rows:i.size[1]+1},r=h(i.offsets,a,n);const s=(r[0]+r[1])/2,o=i.outofBoundPointCount>0&&i.outofBoundPointCount<i.offsets.length/2;return t&&(o||s>y)&&(i=E({...e,spacing:[p,p]}),a={cols:i.size[0]+1,rows:i.size[1]+1},r=h(i.offsets,a,n)),i.error=r,i.coefficients=F(i.offsets,a,o),i}function E(e){const{projectedExtent:t,srcBufferExtent:n,pixelSize:i,datumTransformation:r,rasterTransform:s}=e,o=t.spatialReference,c=n.spatialReference;f(o,c);const{xmin:u,ymin:h,xmax:m,ymax:p}=t,y=I(c),b=e.hasWrapAround||"gcs-shift"===(null==s?void 0:s.type),x=e.spacing||[d,d],g={x:x[0]*i.x,y:x[1]*i.y},j={cols:Math.ceil((m-u)/g.x-.1/x[0])+1,rows:Math.ceil((p-h)/g.y-.1/x[1])+1},O=g.x,M=g.y,v=[];let R,T=0;const S=[];for(let a=0;a<j.cols;a++)for(let e=0;e<j.rows;e++)S.push(new l["a"]({x:u+O*a,y:p-M*e,spatialReference:o}));const z=w(S,c,r);for(let l=0;l<j.cols;l++){const e=[];for(let t=0;t<j.rows;t++){let i=z[l*j.rows+t];s&&(i=s.inverseTransform(i)),e.push(i),l>0&&b&&i&&R[t]&&Object(a["l"])(y)&&i.x<R[t].x&&(i.x+=y),i?(v.push((i.x-n.xmin)/(n.xmax-n.xmin)),v.push((n.ymax-i.y)/(n.ymax-n.ymin))):(v.push(NaN),v.push(NaN),T++)}R=e}return{offsets:v,error:null,coefficients:null,outofBoundPointCount:T,spacing:x,size:[j.cols-1,j.rows-1]}}function F(e,t,n){const{cols:i,rows:a}=t,r=new Float32Array((i-1)*(a-1)*2*6),s=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),o=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let l=0;l<i-1;l++){for(let t=0;t<a-1;t++){let n=l*a*2+2*t;const c=e[n],u=e[n+1],f=e[n+2],h=e[n+3];n+=2*a;const m=e[n],d=e[n+1],p=e[n+2],y=e[n+3];let b=0,x=12*(t*(i-1)+l);for(let e=0;e<3;e++)r[x++]=s[b++]*c+s[b++]*f+s[b++]*p;b=0;for(let e=0;e<3;e++)r[x++]=s[b++]*u+s[b++]*h+s[b++]*y;b=0;for(let e=0;e<3;e++)r[x++]=o[b++]*c+o[b++]*m+o[b++]*p;b=0;for(let e=0;e<3;e++)r[x++]=o[b++]*u+o[b++]*d+o[b++]*y}if(n)for(let e=0;e<r.length;e++)isNaN(r[e])&&(r[e]=-1)}return r}function L(e){const t=e.clone().normalize();return 1===t.length?t[0]:M(t)}function _(e,t,n){const{storageInfo:i,pixelSize:r}=t;let s,o=!1;const{pyramidResolutions:c}=i;if(Object(a["l"])(c)&&c.length){const i=(e.x+e.y)/2,a=c[c.length-1],u=(a.x+a.y)/2,f=(r.x+r.y)/2;if(i<=f)s=0;else if(i>=u)s=c.length,o=i/u>8;else{let e,t=f;for(let a=1;a<=c.length;a++){if(e=(c[a-1].x+c[a-1].y)/2,i<=e){i===e?s=a:"down"===n?(s=a-1,o=i/t>8):s="up"===n||i-t>e-i||i/t>2?a:a-1;break}t=e}}const h=0===s?r:c[s-1];return{pyramidLevel:s,pyramidResolution:new l["a"]({x:h.x,y:h.y,spatialReference:t.spatialReference}),excessiveReading:o}}const u=Math.log(e.x/r.x)/Math.LN2,f=Math.log(e.y/r.y)/Math.LN2,h=t.storageInfo.maximumPyramidLevel||0;s="down"===n?Math.floor(Math.min(u,f)):"up"===n?Math.ceil(Math.max(u,f)):Math.round((u+f)/2),s<0?s=0:s>h&&(o=s>h+3,s=h);const m=2**s;return{pyramidLevel:s,pyramidResolution:new l["a"]({x:m*t.nativePixelSize.x,y:m*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:o}}function k(e,t,n=512,i=!0){const{extent:a,spatialReference:s,pixelSize:o}=e,c=g(new l["a"]({x:o.x,y:o.y,spatialReference:s}),t,a);if(null==c)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const u=(c.x+c.y)/2,f=Object(r["f"])(t),h=u*f*96*39.37,m=t.isGeographic?256/n*295828763.7958547:256/n*591657527.591555;let d="vector-magdir"===e.dataType||"vector-uv"===e.dataType;const p=v(a,t);d||i&&(t.isGeographic||t.isWebMercator)&&(d=p.xmin*p.xmax<0);let y,b=h;const x=1.001;if(d){b=m;const e=t.isGeographic?1341104507446289e-21:.29858214164761665,n=e*(96*f*39.37),i=t.isGeographic?4326:3857;y=g(new l["a"]({x:e,y:e,spatialReference:{wkid:i}}),s,p),y.x*=b/n,y.y*=b/n}else{y={x:o.x,y:o.y};const t=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let n=0;for(;b<m*(x/2)&&n<t;)n++,b*=2,y.x*=2,y.y*=2;Math.max(b,m)/Math.min(b,m)<=x&&(b=m)}const j=[b],O=[{x:y.x,y:y.y}],w=70.5310735,M=Math.min(w,h)/x;for(;b>=M;)b/=2,y.x/=2,y.y/=2,j.push(b),O.push({x:y.x,y:y.y});return{projectedPixelSize:c,scales:j,srcResolutions:O,isCustomTilingScheme:!d}}},e94b:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));n("e06a");var i=n("b2b2"),a=n("8048"),r=n("536f"),s=n("3af1");function o(e,t,n,r=new s["a"]){let o;if("2d"===n.type)o=t*n.resolution;else if("3d"===n.type){const r=n.overlayPixelSizeInMapUnits(e),s=n.basemapSpatialReference;o=Object(i["l"])(s)&&!s.equals(n.spatialReference)?Object(a["f"])(s)/Object(a["f"])(n.spatialReference):t*r}const l=e.x-o,c=e.y-o,u=e.x+o,f=e.y+o,{spatialReference:h}=n;return r.xmin=Math.min(l,u),r.ymin=Math.min(c,f),r.xmax=Math.max(l,u),r.ymax=Math.max(c,f),r.spatialReference=h,r}function l(e,t,n){const a=n.toMap(e);return!Object(i["k"])(a)&&o(a,Object(r["a"])(),n,c).intersects(t)}const c=new s["a"]}}]);