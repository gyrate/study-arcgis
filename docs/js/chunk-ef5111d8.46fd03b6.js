(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef5111d8"],{"2be0":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a("a4ee"),n=a("ce50"),i=a("b2b2"),s=a("f4cc"),c=a("59b2"),l=(a("b50f"),a("c120"),a("cea0"),a("d386")),o=a("536f");const u=e=>{let t=class extends e{async fetchPopupFeatures(e,t){const{layer:a}=this;if(!e)return Promise.reject(new n["a"]("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:a}));if("tile"!==a.type)return Promise.reject(new n["a"]("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:a.type}));const r=this.get("view.scale"),c=a.allSublayers.toArray().filter(e=>{const t=0===e.minScale||r<=e.minScale,a=0===e.maxScale||r>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&a});return Object(s["j"])(c.map(async a=>{const r=a.createQuery(),n=Object(i["l"])(t)?t.event:null,s=Object(o["a"])({renderer:a.renderer,event:n});return r.geometry=this.createFetchPopupFeaturesQueryGeometry(e,s),r.outFields=await a.popupTemplate.getRequiredFields(),(await a.queryFeatures(r)).features})).then(e=>[].concat(...e.map(e=>e.value).filter(Boolean)))}};return Object(r["a"])([Object(c["b"])()],t.prototype,"layer",void 0),t=Object(r["a"])([Object(l["a"])("esri.layers.mixins.TileLayerView")],t),t}},"536f":function(e,t,a){"use strict";function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e){let t=0,a=0;for(let r=0;r<e.length;r++){const n=e[r].size;"number"==typeof n&&(t+=n,a++)}return t/a}function i(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?n(e.stops):t}function s(e,t){if(!t)return e;const a=t.filter(e=>"size"===e.type).map(t=>{const{maxSize:a,minSize:r}=t;return(i(a,e)+i(r,e))/2});let r=0;const n=a.length;if(0===n)return e;for(let i=0;i<n;i++)r+=a[i];const s=Math.floor(r/n);return Math.max(s,e)}function c(e){const t=e&&e.renderer,a="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return a;const n="visualVariables"in t?s(a,t.visualVariables):a;if("simple"===t.type)return r(n,t.symbol);if("unique-value"===t.type){let e=n;return t.uniqueValueInfos.forEach(t=>{e=r(e,t.symbol)}),e}if("class-breaks"===t.type){let e=n;return t.classBreakInfos.forEach(t=>{e=r(e,t.symbol)}),e}return t.type,n}a.d(t,"a",(function(){return c}))},"6c7a":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("a4ee"),n=a("e92d"),i=a("f4cc"),s=a("3795"),c=a("59b2"),l=(a("b50f"),a("c120"),a("cea0"),a("d386"));const o=e=>{let t=class extends e{initialize(){this.handles.add(Object(s["b"])(this,"layer","refresh",e=>{this.doRefresh(e.dataChanged).catch(e=>{Object(i["m"])(e)||n["a"].getLogger(this.declaredClass).error(e)})}),"RefreshableLayerView")}};return Object(r["a"])([Object(c["b"])()],t.prototype,"layer",void 0),t=Object(r["a"])([Object(l["a"])("esri.layers.mixins.RefreshableLayerView")],t),t}},cbe4:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return d}));var r=a("a4ee"),n=a("ce50"),i=a("b2b2"),s=a("59b2"),c=(a("b50f"),a("c120"),a("cea0"),a("d386")),l=a("8188"),o=a("66af"),u=a("45e3"),f=a("365a"),b=a("6c7a"),p=a("2be0"),y=a("e94b");let h=class extends(Object(b["a"])(Object(u["a"])(Object(p["a"])(Object(o["a"])(f["a"]))))){constructor(){super(...arguments),this.type="tile-3d"}get imageFormatIsOpaque(){return"jpg"===this.layer.tileInfo.format}get hasMixedImageFormats(){return"mixed"===this.layer.tileInfo.format}get dataLevelRange(){if(this.tileInfo){const e=this.tileInfo.lods,t=e[0].scale,a=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,a)}return{minLevel:0,maxLevel:0}}initialize(){if("web-tile"===this.layer.type){const e=this.layer.get("fullExtent.spatialReference"),t=this.layer.get("tileInfo.spatialReference");if(Object(i["k"])(e)||Object(i["k"])(t)||!Object(l["b"])(e,t)){const e="defaults"===this.layer.originOf("fullExtent")||Object(i["k"])(this.layer.fullExtent)?"SceneView requires fullExtent to be specified by the user on WebTileLayer":"SceneView requires fullExtent to be specified in the same spatial reference as tileInfo on WebTileLayer";this.addResolvingPromise(Promise.reject(new n["a"]("layerview:incompatible-fullextent",e)))}}this._addTilingSchemeMatchPromise()}createFetchPopupFeaturesQueryGeometry(e,t){return Object(y["a"])(e,t,this.view)}async doRefresh(){this.suspended||this.emit("data-changed")}};Object(r["a"])([Object(s["b"])({readOnly:!0})],h.prototype,"imageFormatIsOpaque",null),Object(r["a"])([Object(s["b"])({readOnly:!0})],h.prototype,"hasMixedImageFormats",null),Object(r["a"])([Object(s["b"])({aliasOf:"layer.fullExtent"})],h.prototype,"fullExtent",void 0),Object(r["a"])([Object(s["b"])()],h.prototype,"layer",void 0),Object(r["a"])([Object(s["b"])({aliasOf:"layer.tileInfo"})],h.prototype,"tileInfo",void 0),Object(r["a"])([Object(s["b"])({readOnly:!0})],h.prototype,"dataLevelRange",null),h=Object(r["a"])([Object(c["a"])("esri.views.3d.layers.TileLayerView3D")],h);const d=h},e94b:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));a("e06a");var r=a("b2b2"),n=a("8048"),i=a("536f"),s=a("3af1");function c(e,t,a,i=new s["a"]){let c;if("2d"===a.type)c=t*a.resolution;else if("3d"===a.type){const i=a.overlayPixelSizeInMapUnits(e),s=a.basemapSpatialReference;c=Object(r["l"])(s)&&!s.equals(a.spatialReference)?Object(n["f"])(s)/Object(n["f"])(a.spatialReference):t*i}const l=e.x-c,o=e.y-c,u=e.x+c,f=e.y+c,{spatialReference:b}=a;return i.xmin=Math.min(l,u),i.ymin=Math.min(o,f),i.xmax=Math.max(l,u),i.ymax=Math.max(o,f),i.spatialReference=b,i}function l(e,t,a){const n=a.toMap(e);return!Object(r["k"])(n)&&c(n,Object(i["a"])(),a,o).intersects(t)}const o=new s["a"]}}]);